(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["animations"],{"407f":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"animations"},[i("AnimationFinal"),i("AnimationFusion"),i("AnimationMixed"),i("AnimationNew"),t.shouldRenderEndAnimation?i("div",[i("AnimationEnd")],1):t._e(),t.shouldRenderCompletionAnimation?i("div",[i("AnimationCompletion")],1):t._e()],1)},s=[],a=i("6e95"),o=i("5c57"),r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"final-animation-container"},t._l(t.elementsList,(function(e){return i("FinalSingle",{key:e[0].elementId,attrs:{elements:e},on:{remove:t.onRemove,finish:t.onSingleFinished}})})),1)},h=[],d=i("1663"),l=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",t._l(t.elements,(function(e){return i("div",{key:e.id,ref:"element",refInFor:!0,staticClass:"dematerialize",class:t.classes,style:t.getStyles(e.position)},[i("div",{staticClass:"core"}),i("div",{staticClass:"ring1"}),i("div",{staticClass:"ring2"})])})),0)},m=[],c=i("53b2"),u=i("7d61"),p=i("d257");const v=u["a"][c["b"]];var A=a["a"].extend({name:"animation-final-single",props:{elements:{type:Array,required:!0}},computed:{id(){return this.elements[0].elementId},classes(){return{"js-active":!0}}},mounted(){const t=Object(p["u"])(this.$refs.element[0],t=>{t===v.delete&&this.onRemoveElement(),t===v.end&&this.onAnimationEnd()});this.$once("hook:beforeDestroy",t)},methods:{getStyles(t){return{top:`${t.y}px`,left:`${t.x}px`}},onRemoveElement(){this.$emit("remove",this.id)},onAnimationEnd(){this.$emit("finish",this.id)}}}),x=A,f=i("2877"),E=Object(f["a"])(x,l,m,!1,null,null,null),w=E.exports,C=a["a"].extend({name:"animation-final",components:{FinalSingle:w},computed:{...Object(o["b"])({elementsIds:"animationFinalElements",finalElements:"workspaceFinal",exhaustedElements:"workspaceExhausted"}),allElements(){return this.finalElements.concat(this.exhaustedElements)},elementsList(){return this.elementsIds.map(t=>this.allElements.filter(({elementId:e})=>e===t)).filter(t=>!!t.length)}},methods:{onRemove(t){this.$store.dispatch("animationFinalMiddle",t)},onSingleFinished(t){this.$store.dispatch("workspaceFinalRemove",t),this.$store.dispatch("workspaceExhaustedRemove",t),this.$store.dispatch("animationFinalFinished",t),d["a"].emit("ANIMATION_FINAL_SINGLE_END")}}}),N=C,_=Object(f["a"])(N,r,h,!1,null,null,null),b=_.exports,y=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"animation-end",rawName:"v-animation-end",value:t.onAnimation,expression:"onAnimation"}],ref:"element",staticClass:"fusion",class:t.classes,style:t.styles,attrs:{id:"fusion"}},[i("div",{staticClass:"fusion-charge-ring"}),i("div",{staticClass:"fusion-core-dark"}),i("div",{staticClass:"fusion-core-light"}),i("div",{staticClass:"fusion-core-ring"})])},I=[];const g=u["a"][c["c"]];var $=a["a"].extend({name:"animation-fusion",data:()=>({isRunning:!1,width:0,height:0}),computed:{...Object(o["b"])({dimensions:"workspaceBoxDimensions",mixHasNewChildren:"mixHasNewChildren",isAnimationActive:"isAnimationActive",mixFather:"mixFather",mixMother:"mixMother"}),isActive(){return this.isAnimationActive(c["c"])||this.isRunning},classes(){return{"js-active":this.isActive}},position(){if(!this.isActive||!this.mixFather||!this.mixMother)return{x:-500,y:0};const t=this.mixFather.position,e=this.mixMother.position,i=(t.x+e.x)/2+this.dimensions.width/2,n=(t.y+e.y)/2+this.dimensions.height/2;return{x:i,y:n}},styles(){const t=this.position,e=t.y-this.height/2,i=t.x-this.width/2;return{top:`${e}px`,left:`${i}px`}}},mounted(){this.updateDimensions(),d["a"].onResize(()=>this.updateDimensions())},methods:{updateDimensions(){const t=Object(p["g"])(this.$refs.element),e=parseInt(t.width,10),i=parseInt(t.height,10);this.width=e,this.height=i},onAnimation({animationName:t}){t===g.middle&&this.onStartNext(),t===g.end&&this.onAnimationEnd()},onStartNext(){this.isRunning=!0,this.$store.dispatch("animationFusionMiddle")},onAnimationEnd(){this.isRunning=!1,this.mixHasNewChildren||this.$store.dispatch("animationReset")}}}),O=$,j=Object(f["a"])(O,y,I,!1,null,null,null),F=j.exports,S=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",t._l(t.animations,(function(e){return i("MixedItem",{key:e.id,attrs:{children:e.children,position:e.position},on:{"animation-end":function(i){return t.onAnimationEnd(e.id)}}})})),1)},k=[],R=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"already-made-container",class:t.classes,style:t.parentStyles},t._l(t.children,(function(e,n){return i("img",{key:e,ref:"icons",refInFor:!0,staticClass:"already-done",class:t.childClasses(n),attrs:{alt:t.getName(e),src:t.iconUrl(e)}})})),0)},B=[],D=i("fd41"),M=a["a"].extend({name:"animation-mixed-item",props:{position:Object,children:Array},data:()=>({isActive:!1}),computed:{parentStyles(){return{top:`${this.position.y}px`,left:`${this.position.x}px`}},classes(){return{"js-active":this.isActive}}},mounted(){this.$nextTick(()=>this.setup())},methods:{setup(){Object(p["y"])(this.$el);const t=this.$refs.icons;if(!t||!t.length)return;const e=Object(p["s"])(t[0],()=>{this.$emit("animation-end"),e()});window.setTimeout(()=>{this.isActive=!0},15)},iconUrl(t){return Object(D["a"])(t)},getName(t){const e=this.$store.getters.elementById(t);return e?e.name:""},childClasses(t){return this.isActive?`already-made-${this.children.length}-${t+1}`:""}}}),K=M,T=Object(f["a"])(K,R,B,!1,null,null,null),H=T.exports,L=a["a"].extend({name:"animation-mixed",components:{MixedItem:H},data(){return{animations:[]}},computed:{...Object(o["b"])(["mixFather","mixChildren"])},mounted(){d["a"].on("ANIMATION_MIXED_START",()=>this.addAnimation())},methods:{addAnimation(){if(!this.mixFather)return;const t=this.mixChildren.map(t=>t.id),e={...this.mixFather.position};this.animations.push({id:Date.now(),children:t,position:e})},onAnimationEnd(t){this.animations=this.animations.filter(({id:e})=>e!==t)}}}),Y=L,P=Object(f["a"])(Y,S,k,!1,null,null,null),W=P.exports,U=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"animation-end",rawName:"v-animation-end",value:t.onAnimation,expression:"onAnimation"}],staticClass:"new-element",class:t.classes,attrs:{id:t.ANIMATION_NEW_ID},on:{click:t.checkNext}},[i("div",{staticClass:"background"}),t._m(0),i("div",{staticClass:"new-element-image-container"},[t.current?i("img",{attrs:{src:t.iconUrl,alt:t.name}}):t._e()]),i("div",{staticClass:"absolute-center outer-name"},[t.isActive?i("div",{staticClass:"name"},[i("span",[t._v(t._s(t.name))])]):t._e()]),i("div",{staticClass:"absolute-center"},[i("div",{staticClass:"description"},[t._v(t._s(t.description))])]),t.isNewBaseActive?i("NewBaseAnimation",{attrs:{active:t.isNewBaseActive},on:{hidden:t.onNewBaseHidden}}):t._e()],1)},z=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"new-element-rays-container"},[i("div",{staticClass:"rays"})])}],J=i("b047"),q=i.n(J),G=i("cd57"),X=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"animation-end",rawName:"v-animation-end",value:t.onAnimation,expression:"onAnimation"}],staticClass:"new-base-element",class:t.classes,on:{click:t.hide}},[t._m(0)])},Q=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"new-item-unlocked"},[t._v(" new item"),i("br"),t._v("revealed! ")])}];const V=u["a"][c["f"]],Z=250;var tt=a["a"].extend({name:"animation-new-base",props:{active:Boolean},data(){return{timestamp:0,hiding:!1}},computed:{classes(){return{"js-active":this.active&&!this.hiding}}},mounted(){this.initKeysListeners()},beforeDestroy(){this.destroyKeysListeners()},methods:{onAnimation({animationName:t}){t===V.baseShow&&this.onShown(),t===V.baseHide&&this.onHidden()},initKeysListeners(){this.hide=this.hide.bind(this),d["a"].on("KEY_ESC",this.hide),d["a"].on("KEY_SPACE",this.hide),d["a"].on("KEY_ENTER",this.hide)},destroyKeysListeners(){d["a"].off("KEY_ESC",this.hide),d["a"].off("KEY_SPACE",this.hide),d["a"].off("KEY_ENTER",this.hide)},hide(){this.active&&!this.hiding&&(this.timestamp+Z>Date.now()||(this.hiding=!0))},onShown(){this.timestamp=Date.now()},onHidden(){this.active&&(this.hiding=!1,this.timestamp=0,this.$emit("hidden"))}}}),et=tt,it=Object(f["a"])(et,X,Q,!1,null,null,null),nt=it.exports;const st=u["a"][c["f"]],at=300;var ot=a["a"].extend({name:"animation-new",components:{NewBaseAnimation:nt},data:()=>({timestamp:0,currentIndex:0,hide:!1,hideContent:!1,isNewBaseActive:!1}),computed:{...Object(o["b"])(["isAnimationActive","mixChildren","elementIsNewlyDiscovered","elementById","descriptionById"]),isActive(){return this.isAnimationActive(c["f"])||this.hide},children(){return this.mixChildren.filter(({id:t})=>this.elementIsNewlyDiscovered(t))},hasElements(){return this.currentIndex+1<this.children.length},currentId(){return this.children.length?this.children[this.currentIndex].id:""},current(){return this.elementById(this.currentId)},name(){return this.current?this.current.name:""},description(){return this.current?this.descriptionById(this.currentId):""},iconUrl(){return Object(D["a"])(this.currentId)},isBase(){return!!this.current&&this.current.base},classes(){return{"js-active":this.isActive||this.hide,"js-hide-content":this.hideContent,"js-background-out":this.hide}},ANIMATION_NEW_ID(){return G["a"]}},mounted(){this.onContentHidden=q()(this.onContentHidden.bind(this),250,{leading:!0,trailing:!1}),this.initKeysListeners()},watch:{isActive(t){t&&(this.timestamp=Date.now())}},methods:{initKeysListeners(){d["a"].on("KEY_ESC",()=>this.checkNext()),d["a"].on("KEY_SPACE",()=>this.checkNext()),d["a"].on("KEY_ENTER",()=>this.checkNext())},checkNext(){!this.isActive||this.hide||this.isNewBaseActive||this.timestamp+at>Date.now()||(this.hasElements?this.hideContent=!0:(this.hide=!0,this.$store.dispatch("animationNewEnding",{removeParents:!1})))},onAnimation({animationName:t}){t===st.start&&this.onAnimationStart(),t===st.hideContent&&this.onContentHidden(),t===st.showContent&&this.onContentShow(),t===st.end&&this.onAnimationEnd()},onAnimationStart(){this.timestamp=Date.now()},onContentHidden(){this.hideContent&&this.hasElements&&(this.currentIndex++,this.isBase&&(this.isNewBaseActive=!0))},onContentShow(){this.hideContent&&!this.isNewBaseActive&&(this.showContent(),d["a"].emit("ANIMATION_NEW_POP"))},onNewBaseHidden(){this.isNewBaseActive=!1,this.showContent(),d["a"].emit("ANIMATION_NEW_POP")},showContent(){this.hideContent=!1,this.timestamp=Date.now()},onAnimationEnd(){this.hide=!1,this.$store.dispatch("animationReset"),this.$store.dispatch("animationNewEnd"),d["a"].emit("ANIMATION_NEW_END"),this.currentIndex=0,this.timestamp=0,this.hideContent=!1}}}),rt=ot,ht=Object(f["a"])(rt,U,z,!1,null,null,null),dt=ht.exports,lt=a["a"].extend({name:"animations",components:{AnimationFinal:b,AnimationFusion:F,AnimationMixed:W,AnimationNew:dt,AnimationEnd:()=>i.e("end-animation").then(i.bind(null,"0e2c")),AnimationCompletion:()=>i.e("completion-animation").then(i.bind(null,"ee39"))},computed:{...Object(o["b"])(["hasAllElements","hasAllExhausted"]),shouldRenderEndAnimation(){return this.hasAllElements},shouldRenderCompletionAnimation(){return this.hasAllExhausted}}}),mt=lt,ct=Object(f["a"])(mt,n,s,!1,null,null,null);e["default"]=ct.exports}}]);
//# sourceMappingURL=animations.6d4f80e8.js.map